import{f as j,w as F,d as L,g as P,a as i,t as b,c as O}from"../chunks/BbMFh2fa.js";import{p as E,o as M,ak as R,t as w,a as q,ax as A,ah as H,k as c,s as N,c as T,r as f,n as C}from"../chunks/l1OLxsb_.js";import{i as $}from"../chunks/C6GMpQxS.js";import{e as k,i as B}from"../chunks/BfMp08hl.js";import{A as e,g as K,e as W,f as z,l as Y,h as G,a as D,t as J,s as I,c as o,m as Q,i as U}from"../chunks/-tgamG4h.js";import{b as X}from"../chunks/xUfVd2lI.js";import{b as Z}from"../chunks/CoEGJ4xk.js";function tt(_,y){j(window,["resize"],()=>F(()=>y(window[_])))}var at=b("<img>"),et=b('<button></button> <span class="divider-vertical h-full"></span>',1),rt=b("<p>Select V1 and V2 folders.</p>"),st=b('<button class="w-full"><img></button>'),ot=b('<span class="divider-vertical h-full"></span>'),nt=b("<!> <!>",1),lt=b('<div class="flex w-full flex-col gap-1 overflow-hidden p-1"><div class="[&amp;>*]:my-0 [&amp;>*]:py-0"><button class="btn btn-sm">TOP TOOLBAR</button> <button class="btn btn-sm">n</button> <button class="btn btn-sm">Things</button> <span class="divider-vertical"></span> <button class="btn btn-sm">1</button> <button class="btn btn-sm">2</button></div> <div class="flex shrink-0 gap-1 overflow-x-auto" id="thumbnail-scroll"></div> <div class="flex w-full grow gap-1 overflow-hidden"></div></div>');function ft(_,y){E(y,!0),e.bottomBar.show=!0;let g;M(async()=>{e.layout.bodyArea=e.layout.svelteInnerHeight-(e.layout.topBar+e.layout.bottomBar);let t=await K();t?(e.v1DirFileSysHandle=t.v1,e.v2DirFileSysHandle=t.v2):console.log("No handles found"),await W(),e.currentPair=z()[0],await Y()}),R(()=>{var a;let t=document.querySelector('button[data-ScrollID="'+((a=e.currentPair)==null?void 0:a.baseName)+'"]');t&&(t.scrollIntoView({behavior:"instant"}),g.scrollLeft+=t.getBoundingClientRect().left-(window==null?void 0:window.innerWidth)/2.5)});var h=lt();P("keypress",A,t=>{G(t.code)}),P("mousemove",A,function(...t){var a;(a=D.v.showNameInInfoBar?d=>{J(Q,100)(d)}:null)==null||a.apply(this,t)});var v=N(T(h),2);k(v,21,z,B,(t,a)=>{var d=et(),r=H(d);r.__click=()=>{e.bottomBar.statusText="loading...",e.currentPair=c(a),setTimeout(()=>{e.bottomBar.statusText=""},1200)},k(r,20,()=>["v1","v2"],B,(S,m)=>{var p=O(),s=H(p);{var n=l=>{var u=at();w(V=>{I(u,`inline border-b-4 ${V??""}`),o(u,"src",c(a)[m].url),o(u,"alt",c(a)[m].name),o(u,"style",`height: ${D.v.thumbnailSize??""}px; width: auto;`)},[()=>e.selections.get(c(a).baseName)===m?"border-warning-200":"border-warning-900"]),i(l,u)};$(s,l=>{c(a)[m]&&l(n)})}i(S,p)}),f(r),C(2),w(()=>{o(r,"data-infobar",c(a).baseName),o(r,"data-scrollid",c(a).baseName),I(r,`min-w-fit border ${(c(a)==e.currentPair?"brightness-125":"border-gray-600 brightness-75")??""}`)}),i(t,d)},t=>{var a=rt();i(t,a)}),f(v),Z(v,t=>g=t,()=>g);var x=N(v,2);k(x,20,()=>["v1","v2"],B,(t,a)=>{var d=nt(),r=H(d);{var S=s=>{var n=st();n.__click=()=>{U(e.currentPair.baseName,a)};var l=T(n);f(n),w(u=>{o(l,"data-infobar",`${a??""} - ${e.currentPair.baseName??""}`),I(l,`h-full w-full grow border-4 object-contain ${(a==="v1"?"object-right":"object-left")??""} ${u??""}`),o(l,"src",e.currentPair[a].url),o(l,"alt",e.currentPair[a].name)},[()=>e.selections.get(e.currentPair.baseName)===a?"border-yellow-300":"border-gray-400"]),i(s,n)};$(r,s=>{e.currentPair&&s(S)})}var m=N(r,2);{var p=s=>{var n=ot();i(s,n)};$(m,s=>{a=="v1"&&s(p)})}i(t,d)}),f(x),f(h),w(()=>o(h,"style",`height: ${e.layout.bodyArea??""}px;`)),tt("innerHeight",t=>e.layout.svelteInnerHeight=t),P("wheel",v,t=>{t.preventDefault(),g.scrollLeft+=t.deltaY}),X(x,"clientHeight",t=>e.layout.largeViewImgHeight=t),i(_,h),q()}L(["click"]);export{ft as component};
