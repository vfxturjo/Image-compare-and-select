import{f as j,w as F,d as L,g as P,a as i,t as b,c as O}from"../chunks/CzixSj1C.js";import{p as E,o as M,ak as R,t as w,a as q,ax as A,ah as $,k as c,s as H,c as T,r as f,n as C}from"../chunks/D-uJMW2w.js";import{i as I}from"../chunks/2bZSavqi.js";import{e as N,i as k}from"../chunks/BBAf2XLN.js";import{A as e,g as K,e as W,f as z,l as Y,h as G,a as D,t as J,s as B,c as r,m as Q,i as U}from"../chunks/CXqGzxbi.js";import{b as X}from"../chunks/B7cBj7Zb.js";import{b as Z}from"../chunks/_u3s7Byn.js";function tt(_,y){j(window,["resize"],()=>F(()=>y(window[_])))}var at=b("<img>"),et=b('<button></button> <span class="divider-vertical h-full"></span>',1),rt=b("<p>Select V1 and V2 folders.</p>"),st=b('<button class="w-full"><img></button>'),ot=b('<span class="divider-vertical h-full"></span>'),nt=b("<!> <!>",1),lt=b('<div class="flex w-full flex-col gap-1 overflow-hidden p-1"><div class="[&amp;>*]:my-0 [&amp;>*]:py-0"><button class="btn btn-sm">TOP TOOLBAR</button> <button class="btn btn-sm">n</button> <button class="btn btn-sm">Things</button> <span class="divider-vertical"></span> <button class="btn btn-sm">1</button> <button class="btn btn-sm">2</button></div> <div class="flex shrink-0 gap-1 overflow-x-auto" id="thumbnail-scroll"></div> <div class="flex w-full grow gap-1 overflow-hidden"></div></div>');function ft(_,y){E(y,!0),e.bottomBar.show=!0;let g;M(async()=>{e.layout.bodyArea=e.layout.svelteInnerHeight-(e.layout.topBar+e.layout.bottomBar);let t=await K();t?(e.v1DirFileSysHandle=t.v1,e.v2DirFileSysHandle=t.v2):console.log("No handles found"),await W(),e.currentPair=z()[0],await Y()}),R(()=>{var a;let t=document.querySelector('button[data-ScrollID="'+((a=e.currentPair)==null?void 0:a.baseName)+'"]');t&&(t.scrollIntoView({behavior:"instant"}),g.scrollLeft+=t.getBoundingClientRect().left-(window==null?void 0:window.innerWidth)/2.5)});var h=lt();P("keypress",A,t=>{G(t.code)}),P("mousemove",A,function(...t){var a;(a=D.v.showNameInInfoBar?d=>{J(Q,100)(d)}:null)==null||a.apply(this,t)});var v=H(T(h),2);N(v,21,z,k,(t,a)=>{var d=et(),s=$(d);s.__click=()=>{e.bottomBar.statusText="loading...",e.currentPair=c(a),setTimeout(()=>{e.bottomBar.statusText=""},1200)},N(s,20,()=>["v1","v2"],k,(S,m)=>{var p=O(),o=$(p);{var l=n=>{var u=at();w(V=>{B(u,`inline border-b-4 ${V??""}`),r(u,"src",c(a)[m].url),r(u,"alt",c(a)[m].name),r(u,"style",`height: ${D.v.thumbnailSize??""}px; width: auto;`)},[()=>e.selections.get(c(a).baseName)===m?"border-warning-200":"border-warning-900"]),i(n,u)};I(o,n=>{c(a)[m]&&n(l)})}i(S,p)}),f(s),C(2),w(()=>{r(s,"data-infobar",c(a).baseName),r(s,"data-scrollid",c(a).baseName),B(s,`min-w-fit border ${(c(a)==e.currentPair?"brightness-125":"border-gray-600 brightness-75")??""}`)}),i(t,d)},t=>{var a=rt();i(t,a)}),f(v),Z(v,t=>g=t,()=>g);var x=H(v,2);N(x,20,()=>["v1","v2"],k,(t,a)=>{var d=nt(),s=$(d);{var S=o=>{var l=st();l.__click=()=>{U(e.currentPair.baseName,a)};var n=T(l);f(l),w(u=>{r(n,"id",`mainImg-${a??""}`),r(n,"data-infobar",`${a??""} - ${e.currentPair.baseName??""}`),B(n,`h-full w-full grow border-4 object-contain ${(a==="v1"?"object-right":"object-left")??""} ${u??""}`),r(n,"src",e.currentPair[a].url),r(n,"alt",e.currentPair[a].name)},[()=>e.selections.get(e.currentPair.baseName)===a?"border-yellow-300":"border-gray-400"]),i(o,l)};I(s,o=>{e.currentPair&&o(S)})}var m=H(s,2);{var p=o=>{var l=ot();i(o,l)};I(m,o=>{a=="v1"&&o(p)})}i(t,d)}),f(x),f(h),w(()=>r(h,"style",`height: ${e.layout.bodyArea??""}px;`)),tt("innerHeight",t=>e.layout.svelteInnerHeight=t),P("wheel",v,t=>{t.preventDefault(),g.scrollLeft+=t.deltaY}),X(x,"clientHeight",t=>e.layout.largeViewImgHeight=t),i(_,h),q()}L(["click"]);export{ft as component};
